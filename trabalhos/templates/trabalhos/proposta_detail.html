{% extends 'base.html' %}
{% load static %}

{% block title %}Detalhes da Proposta{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/forms.css' %}">

<h1 class="mt-4" style="color: #ff6d00;">Detalhes da Proposta</h1>
<hr style="border-color: #ff6d00;">

<div class="d-flex justify-content-between align-items-center mb-4">
    <a href="{% url 'trabalhos:propostas_list' %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Voltar
    </a>
    <div>
        <a href="{% url 'trabalhos:proposta_update' proposta.id %}" class="btn btn-primary">
            <i class="bi bi-pencil"></i> Editar
        </a>
        <form action="{% url 'trabalhos:proposta_delete' proposta.id %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger" style="box-shadow: none;" onclick="return confirm('Tem certeza que deseja eliminar esta proposta?');">
                <i class="bi bi-trash"></i> Eliminar
            </button>
        </form>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="mb-3">
            <label for="cliente" class="form-label" style="color: #ff6d00; font-weight: bold;">Cliente</label>
            <p>{{ proposta.cliente.nome }}</p>
        </div>
        <div class="mb-3">
            <label for="titulo" class="form-label" style="color: #ff6d00; font-weight: bold;">Título</label>
            <p>{{ proposta.titulo }}</p>
        </div>
        <div class="mb-3">
            <label for="descricao" class="form-label" style="color: #ff6d00; font-weight: bold;">Descrição</label>
            <p style="white-space: pre-wrap;">{{ proposta.descricao }}</p>
        </div>
        <div class="mb-3">
            <label for="prazo" class="form-label" style="color: #ff6d00; font-weight: bold;">Prazo</label>
            <p>{{ proposta.prazo }}</p>
        </div>
        <div class="mb-3">
            <label for="estado" class="form-label" style="color: #ff6d00; font-weight: bold;">Estado</label>
            <p>{{ proposta.get_estado_display }}</p>
        </div>
        <div class="mb-3">
            <label for="pdf" class="form-label" style="color: #ff6d00; font-weight: bold;">PDF</label>
            {% if proposta.pdf %}
                <p><a href="{{ proposta.pdf.url }}" target="_blank">Ver PDF</a></p>
            {% else %}
                <p>Nenhum PDF disponível.</p>
            {% endif %}
        </div>
    </div>
    
    <div class="col-md-6">
        <h4>Pré-visualização do PDF</h4>
        {% if proposta.pdf %}
            <iframe src="{{ proposta.pdf.url }}" style="width: 100%; height: 400px; border: none;"></iframe>
        {% else %}
            <p>Nenhum PDF disponível para visualização.</p>
        {% endif %}
    </div>
</div>

{% endblock %}
